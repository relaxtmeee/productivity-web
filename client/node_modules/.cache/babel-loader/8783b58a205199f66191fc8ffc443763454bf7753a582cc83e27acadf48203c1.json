{"ast":null,"code":"var _jsxFileName = \"/Users/serzhivanov/Desktop/Coding/Projects/myweb/client/src/pages/TodosPage/modules/components/Todos/Todos.tsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$();\nimport { memo, useCallback, useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { useTypedSelector } from '../../../../../store/selectorTypedHook';\nimport { addCategory, fetchCategories, fetchCategoryProjects, setCurrentCategory } from '../../../../../store/todosSlice';\nimport Button from '../../../../../ui/Button/Button';\nimport { ErrorMessage } from '../../../../../ui/Error/ErrorBoundary';\nimport Input from '../../../../../ui/Input/Input';\nimport PTag from '../../../../../ui/PTag/PTag';\nimport Spinner from '../../../../../ui/Spinner/Spinner';\nimport WarningAuth from '../../../../../ui/WarningAuth/WarningAuth';\nimport { createNewCategory } from '../../services/todosAPI';\nimport styles from './Todos.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nconst Todos = () => {\n  _s();\n  const [category, setCategory] = useState('');\n  const userId = useTypedSelector(state => {\n    var _state$user$user;\n    return (_state$user$user = state.user.user) === null || _state$user$user === void 0 ? void 0 : _state$user$user.id;\n  });\n  const loading = useTypedSelector(state => state.todos.todosLoadingStatus);\n  const dispatch = useDispatch();\n  useEffect(() => {\n    if (typeof userId !== 'undefined') {\n      dispatch(fetchCategories(userId));\n    }\n  }, []);\n  const addNewCategory = async () => {\n    try {\n      if (typeof userId !== 'undefined') {\n        await createNewCategory({\n          name: category,\n          status: 'progress',\n          userId\n        }).then(data => {\n          dispatch(addCategory(data));\n        });\n      }\n    } catch (error) {\n      console.log(error);\n    } finally {\n      setCategory('');\n    }\n  };\n  if (loading === 'pending') {\n    return /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 13\n      }, this)\n    }, void 0, false);\n  }\n  if (loading === 'failed') {\n    return /*#__PURE__*/_jsxDEV(ErrorMessage, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 16\n    }, this);\n  }\n  if (!userId) {\n    return /*#__PURE__*/_jsxDEV(WarningAuth, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 58,\n      columnNumber: 16\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.todos,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.category,\n      children: [/*#__PURE__*/_jsxDEV(PTag, {\n        size: \"18\",\n        children: \"Categories\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(TodosGeneration, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 65,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Input, {\n        placeholder: \"Set category\",\n        value: category,\n        onChange: e => setCategory(e.target.value)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 66,\n        columnNumber: 13\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        onClick: addNewCategory,\n        className: styles.button,\n        children: \"Add category\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 67,\n        columnNumber: 13\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 63,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(ProjectGeneration, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 71,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 62,\n    columnNumber: 5\n  }, this);\n};\n_s(Todos, \"UQM+dD5rb1J1jRn+K43Ipvz4x54=\", false, function () {\n  return [useTypedSelector, useTypedSelector, useDispatch];\n});\n_c = Todos;\nconst TodosGeneration = /*#__PURE__*/_s2( /*#__PURE__*/memo(_c2 = _s2(() => {\n  _s2();\n  const dispatch = useDispatch();\n  const categories = useTypedSelector(state => state.todos.categories);\n  const openProject = useCallback(async id => {\n    dispatch(setCurrentCategory(id));\n    await dispatch(fetchCategoryProjects(id));\n  }, []);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: categories === null || categories === void 0 ? void 0 : categories.map(category => {\n      return /*#__PURE__*/_jsxDEV(Button, {\n        onClick: () => {\n          var _category$id;\n          return openProject((_category$id = category.id) !== null && _category$id !== void 0 ? _category$id : '');\n        },\n        className: styles.categoryButton,\n        children: category.name\n      }, category.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 21\n      }, this);\n    })\n  }, void 0, false);\n}, \"hcQurSOw6R1zposEDow+LMhljcg=\", false, function () {\n  return [useDispatch, useTypedSelector];\n})), \"hcQurSOw6R1zposEDow+LMhljcg=\", false, function () {\n  return [useDispatch, useTypedSelector];\n});\n_c3 = TodosGeneration;\nconst ProjectGeneration = /*#__PURE__*/_s3( /*#__PURE__*/memo(_c4 = _s3(() => {\n  _s3();\n  const currentCategory = useTypedSelector(state => state.todos.currentCategory);\n  const currentCategoryProjects = useTypedSelector(state => state.todos.curentCategoryProjects);\n  console.log('projects');\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: currentCategory ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: currentCategory\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 111,\n        columnNumber: 17\n      }, this), currentCategoryProjects === null || currentCategoryProjects === void 0 ? void 0 : currentCategoryProjects.map(el => {\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          children: el.name\n        }, el.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 113,\n          columnNumber: 28\n        }, this);\n      })]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 110,\n      columnNumber: 13\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"\\u0412\\u044B\\u0431\\u0435\\u0440\\u0438\\u0442\\u0435 \\u043A\\u0430\\u0442\\u0435\\u0433\\u043E\\u0440\\u0438\\u044E\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 118,\n      columnNumber: 13\n    }, this)\n  }, void 0, false);\n}, \"XAyIToUNEWqsUifzZzmA1tqfWBw=\", false, function () {\n  return [useTypedSelector, useTypedSelector];\n})), \"XAyIToUNEWqsUifzZzmA1tqfWBw=\", false, function () {\n  return [useTypedSelector, useTypedSelector];\n});\n_c5 = ProjectGeneration;\nexport default Todos;\nvar _c, _c2, _c3, _c4, _c5;\n$RefreshReg$(_c, \"Todos\");\n$RefreshReg$(_c2, \"TodosGeneration$memo\");\n$RefreshReg$(_c3, \"TodosGeneration\");\n$RefreshReg$(_c4, \"ProjectGeneration$memo\");\n$RefreshReg$(_c5, \"ProjectGeneration\");","map":{"version":3,"names":["memo","useCallback","useEffect","useState","useDispatch","useTypedSelector","addCategory","fetchCategories","fetchCategoryProjects","setCurrentCategory","Button","ErrorMessage","Input","PTag","Spinner","WarningAuth","createNewCategory","styles","Todos","category","setCategory","userId","state","user","id","loading","todos","todosLoadingStatus","dispatch","addNewCategory","name","status","then","data","error","console","log","e","target","value","button","TodosGeneration","categories","openProject","map","categoryButton","ProjectGeneration","currentCategory","currentCategoryProjects","curentCategoryProjects","el"],"sources":["/Users/serzhivanov/Desktop/Coding/Projects/myweb/client/src/pages/TodosPage/modules/components/Todos/Todos.tsx"],"sourcesContent":["import { memo, useCallback, useEffect, useState } from 'react';\nimport { useDispatch } from 'react-redux';\nimport { NavLink } from 'react-router-dom';\nimport { useTypedSelector } from '../../../../../store/selectorTypedHook';\nimport { AppDispatch } from '../../../../../store/store';\nimport { addCategory, fetchCategories, fetchCategoryProjects, setCurrentCategory } from '../../../../../store/todosSlice';\nimport Button from '../../../../../ui/Button/Button';\nimport { ErrorMessage } from '../../../../../ui/Error/ErrorBoundary';\nimport Input from '../../../../../ui/Input/Input';\nimport PTag from '../../../../../ui/PTag/PTag';\nimport Spinner from '../../../../../ui/Spinner/Spinner';\nimport WarningAuth from '../../../../../ui/WarningAuth/WarningAuth';\nimport { ICategory } from '../../interfaces/Category.interface';\nimport { createNewCategory } from '../../services/todosAPI';\nimport styles from './Todos.module.css';\n\nconst Todos: React.FC = ():JSX.Element => {\n\n    const [category, setCategory] = useState<string>('');\n\n    const userId = useTypedSelector(state => state.user.user?.id);\n    const loading = useTypedSelector(state => state.todos.todosLoadingStatus);\n\n    const dispatch = useDispatch<AppDispatch>();\n\n    useEffect(() => {\n        if ( typeof userId !== 'undefined') {\n            dispatch(fetchCategories(userId));\n        }\n    }, []);\n\n    const addNewCategory = async () => {\n        try {\n            if(typeof userId !== 'undefined') {\n                await createNewCategory({name: category, status: 'progress', userId})\n                    .then(data => {\n                        dispatch(addCategory(data));\n                    })\n            }\n        } catch (error) {\n            console.log(error);\n        } finally {\n            setCategory('');\n        }\n    }\n\n    if(loading === 'pending') {\n        return <>\n            <Spinner/>\n        </>\n    } \n\n    if(loading === 'failed') {\n        return <ErrorMessage />\n    }\n    \n    if(!userId) {\n        return <WarningAuth />\n    }\n\n    return (\n    <div className={styles.todos}>  \n        <div className={styles.category}>\n            <PTag size='18'>Categories</PTag>\n            <TodosGeneration />\n            <Input placeholder='Set category' value={category} onChange={(e) => setCategory(e.target.value)}/>\n            <Button onClick={addNewCategory} className={styles.button}>\n                Add category\n            </Button>\n        </div>\n        <ProjectGeneration/>\n        </div>\n    );\n};\n\nconst TodosGeneration = memo((): JSX.Element => {\n\n    const dispatch = useDispatch<AppDispatch>();\n\n    const categories = useTypedSelector(state => state.todos.categories);\n\n    const openProject = useCallback(async (id: string) => {\n        dispatch(setCurrentCategory(id));\n        await dispatch(fetchCategoryProjects(id))\n    }, [])\n\n    return (\n        <>  \n            {categories?.map(category => {\n                return (\n                    <Button onClick={() => openProject(category.id ?? '')} className={styles.categoryButton} key={category.id}>\n                        {category.name}\n                    </Button>\n                )\n            })}\n        </>\n    )\n})\n\nconst ProjectGeneration = memo(():JSX.Element => {\n\n    const currentCategory = useTypedSelector(state => state.todos.currentCategory);\n    const currentCategoryProjects = useTypedSelector(state => state.todos.curentCategoryProjects);\n    console.log('projects');\n    \n    return (\n        <>\n            {currentCategory \n                ?\n            <div>\n                <h1>{currentCategory}</h1>\n                {currentCategoryProjects?.map(el => {\n                    return <div key={el.id}>{el.name}</div>\n                })}\n            </div> \n               \n                :\n            <div>Выберите категорию</div>\n            }\n        </>\n    )\n})\n\nexport default Todos;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}