{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { getCategories, getCategoryProjects } from \"../pages/TodosPage/modules/services/todosAPI\";\nconst initialState = {\n  categories: [],\n  currentCategory: '',\n  todosLoadingStatus: 'idle'\n};\nexport const fetchCategories = createAsyncThunk('posts/fetchCategories', async (userId, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  const response = await getCategories(userId);\n  if (typeof response !== 'string') {\n    return response;\n  } else {\n    return rejectWithValue(response);\n  }\n});\nexport const fetchCategoryProjects = createAsyncThunk('posts/fetchCategoryProjects', async (categoryId, _ref2) => {\n  let {\n    rejectWithValue\n  } = _ref2;\n  const response = await getCategoryProjects(categoryId);\n  if (typeof response !== 'string') {\n    return response;\n  } else {\n    return rejectWithValue(response);\n  }\n});\nconst postsSlice = createSlice({\n  name: 'todos',\n  initialState,\n  reducers: {\n    addCategory: (state, action) => {\n      var _state$categories;\n      (_state$categories = state.categories) === null || _state$categories === void 0 ? void 0 : _state$categories.push(action.payload);\n    },\n    setCurrentCategory: (state, action) => {\n      state.currentCategory = action.payload;\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchCategories.pending, state => {\n      state.todosLoadingStatus = 'pending';\n    }).addCase(fetchCategories.fulfilled, (state, action) => {\n      state.categories = action.payload;\n      state.todosLoadingStatus = 'idle';\n    }).addCase(fetchCategories.rejected, state => {\n      state.todosLoadingStatus = 'failed';\n    }).addDefaultCase(() => {});\n  }\n});\nconst {\n  actions,\n  reducer\n} = postsSlice;\nexport const {\n  addCategory,\n  setCurrentCategory\n} = actions;\nexport default reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","getCategories","getCategoryProjects","initialState","categories","currentCategory","todosLoadingStatus","fetchCategories","userId","rejectWithValue","response","fetchCategoryProjects","categoryId","postsSlice","name","reducers","addCategory","state","action","push","payload","setCurrentCategory","extraReducers","builder","addCase","pending","fulfilled","rejected","addDefaultCase","actions","reducer"],"sources":["/Users/serzhivanov/Desktop/Coding/Projects/myweb/client/src/store/todosSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { ICategory } from \"../pages/TodosPage/modules/interfaces/Category.interface\";\nimport { getCategories, getCategoryProjects } from \"../pages/TodosPage/modules/services/todosAPI\";\n\n\nexport interface ITodos {\n    categories: ICategory[] | undefined\n    currentCategory: string\n    todosLoadingStatus: 'idle' | 'pending' | 'succeeded' | 'failed'\n}\n\nconst initialState = {\n    categories: [],\n    currentCategory: '',\n    todosLoadingStatus: 'idle'\n} as ITodos\n\nexport const fetchCategories = createAsyncThunk(\n    'posts/fetchCategories',\n    async (userId: string, {rejectWithValue}) => {\n        const response = await getCategories(userId);\n        if (typeof response !== 'string') {\n          return response;\n        } else {\n          return rejectWithValue(response);\n        }\n    }\n)\n\nexport const fetchCategoryProjects = createAsyncThunk(\n    'posts/fetchCategoryProjects',\n    async (categoryId: string , {rejectWithValue}) => {\n        const response = await getCategoryProjects(categoryId);\n        if (typeof response !== 'string') {\n          return response;\n        } else {\n          return rejectWithValue(response);\n        }\n    }\n)\n\nconst postsSlice = createSlice({\n    name: 'todos',\n    initialState,\n    reducers: {\n        addCategory: (state, action) => {state.categories?.push(action.payload)},\n        setCurrentCategory: (state, action) => {state.currentCategory = action.payload}\n    },\n    extraReducers: (builder) => {\n        builder \n            .addCase(fetchCategories.pending, state => {state.todosLoadingStatus =  'pending'})\n            .addCase(fetchCategories.fulfilled, (state, action) => {\n                state.categories =  action.payload;\n                state.todosLoadingStatus = 'idle';     \n            })\n            .addCase(fetchCategories.rejected, state => {state.todosLoadingStatus = 'failed'})\n            .addDefaultCase(() => {})\n    }\n});\n\n\nconst { actions, reducer } = postsSlice;\n\nexport const { addCategory, setCurrentCategory } = actions;\n\nexport default reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAEhE,SAASC,aAAa,EAAEC,mBAAmB,QAAQ,8CAA8C;AASjG,MAAMC,YAAY,GAAG;EACjBC,UAAU,EAAE,EAAE;EACdC,eAAe,EAAE,EAAE;EACnBC,kBAAkB,EAAE;AACxB,CAAW;AAEX,OAAO,MAAMC,eAAe,GAAGP,gBAAgB,CAC3C,uBAAuB,EACvB,OAAOQ,MAAc,WAAwB;EAAA,IAAtB;IAACC;EAAe,CAAC;EACpC,MAAMC,QAAQ,GAAG,MAAMT,aAAa,CAACO,MAAM,CAAC;EAC5C,IAAI,OAAOE,QAAQ,KAAK,QAAQ,EAAE;IAChC,OAAOA,QAAQ;EACjB,CAAC,MAAM;IACL,OAAOD,eAAe,CAACC,QAAQ,CAAC;EAClC;AACJ,CAAC,CACJ;AAED,OAAO,MAAMC,qBAAqB,GAAGX,gBAAgB,CACjD,6BAA6B,EAC7B,OAAOY,UAAkB,YAAyB;EAAA,IAAtB;IAACH;EAAe,CAAC;EACzC,MAAMC,QAAQ,GAAG,MAAMR,mBAAmB,CAACU,UAAU,CAAC;EACtD,IAAI,OAAOF,QAAQ,KAAK,QAAQ,EAAE;IAChC,OAAOA,QAAQ;EACjB,CAAC,MAAM;IACL,OAAOD,eAAe,CAACC,QAAQ,CAAC;EAClC;AACJ,CAAC,CACJ;AAED,MAAMG,UAAU,GAAGd,WAAW,CAAC;EAC3Be,IAAI,EAAE,OAAO;EACbX,YAAY;EACZY,QAAQ,EAAE;IACNC,WAAW,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAAA;MAAC,qBAAAD,KAAK,CAACb,UAAU,sDAAhB,kBAAkBe,IAAI,CAACD,MAAM,CAACE,OAAO,CAAC;IAAA,CAAC;IACxEC,kBAAkB,EAAE,CAACJ,KAAK,EAAEC,MAAM,KAAK;MAACD,KAAK,CAACZ,eAAe,GAAGa,MAAM,CAACE,OAAO;IAAA;EAClF,CAAC;EACDE,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CACFC,OAAO,CAACjB,eAAe,CAACkB,OAAO,EAAER,KAAK,IAAI;MAACA,KAAK,CAACX,kBAAkB,GAAI,SAAS;IAAA,CAAC,CAAC,CAClFkB,OAAO,CAACjB,eAAe,CAACmB,SAAS,EAAE,CAACT,KAAK,EAAEC,MAAM,KAAK;MACnDD,KAAK,CAACb,UAAU,GAAIc,MAAM,CAACE,OAAO;MAClCH,KAAK,CAACX,kBAAkB,GAAG,MAAM;IACrC,CAAC,CAAC,CACDkB,OAAO,CAACjB,eAAe,CAACoB,QAAQ,EAAEV,KAAK,IAAI;MAACA,KAAK,CAACX,kBAAkB,GAAG,QAAQ;IAAA,CAAC,CAAC,CACjFsB,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;EACjC;AACJ,CAAC,CAAC;AAGF,MAAM;EAAEC,OAAO;EAAEC;AAAQ,CAAC,GAAGjB,UAAU;AAEvC,OAAO,MAAM;EAAEG,WAAW;EAAEK;AAAmB,CAAC,GAAGQ,OAAO;AAE1D,eAAeC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}