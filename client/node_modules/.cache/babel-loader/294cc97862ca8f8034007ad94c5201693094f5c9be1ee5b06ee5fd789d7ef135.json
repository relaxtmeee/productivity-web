{"ast":null,"code":"import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { getHabits } from \"../pages/HabitsPage/modules/services/habitAPI\";\nconst initialState = {\n  habits: [],\n  habitsLoadingStatus: 'idle'\n};\nexport const fetchHabits = createAsyncThunk('posts/fetchHabits', async (userId, _ref) => {\n  let {\n    rejectWithValue\n  } = _ref;\n  const response = await getHabits(userId);\n  if (typeof response !== 'string') {\n    return response;\n  } else {\n    return rejectWithValue(response);\n  }\n});\nconst habitsSlice = createSlice({\n  name: 'habits',\n  initialState,\n  reducers: {\n    addHabit: (state, action) => {\n      var _state$habits;\n      (_state$habits = state.habits) === null || _state$habits === void 0 ? void 0 : _state$habits.push(action.payload);\n    },\n    updateDatesHabit: (state, action) => {\n      var _state$habits2;\n      (_state$habits2 = state.habits) === null || _state$habits2 === void 0 ? void 0 : _state$habits2.map(habit => habit.id === action.payload.id ? action.payload : habit);\n    }\n  },\n  extraReducers: builder => {\n    builder.addCase(fetchHabits.pending, state => {\n      state.habitsLoadingStatus = 'pending';\n    }).addCase(fetchHabits.fulfilled, (state, action) => {\n      state.habits = action.payload;\n      state.habitsLoadingStatus = 'idle';\n    }).addCase(fetchHabits.rejected, state => {\n      state.habitsLoadingStatus = 'failed';\n    }).addDefaultCase(() => {});\n  }\n});\nconst {\n  actions,\n  reducer\n} = habitsSlice;\nexport const {\n  addHabit\n} = actions;\nexport default reducer;","map":{"version":3,"names":["createSlice","createAsyncThunk","getHabits","initialState","habits","habitsLoadingStatus","fetchHabits","userId","rejectWithValue","response","habitsSlice","name","reducers","addHabit","state","action","push","payload","updateDatesHabit","map","habit","id","extraReducers","builder","addCase","pending","fulfilled","rejected","addDefaultCase","actions","reducer"],"sources":["/Users/serzhivanov/Desktop/Coding/Projects/myweb/client/src/store/habitsSlice.ts"],"sourcesContent":["import { createSlice, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport { IHabit } from \"../pages/HabitsPage/modules/interfaces/Habits.interfaces\";\nimport { getHabits } from \"../pages/HabitsPage/modules/services/habitAPI\";\n\nexport interface IHabits {\n    habits: IHabit[] | undefined\n    habitsLoadingStatus: 'idle' | 'pending' | 'succeeded' | 'failed'\n}\n\nconst initialState = {\n    habits: [],\n    habitsLoadingStatus: 'idle'\n} as IHabits\n\nexport const fetchHabits = createAsyncThunk(\n    'posts/fetchHabits',\n    async (userId: string, {rejectWithValue}) => {\n        const response = await getHabits(userId);\n        if (typeof response !== 'string') {\n          return response;\n        } else {\n          return rejectWithValue(response);\n        }\n    }\n)\n\nconst habitsSlice = createSlice({\n    name: 'habits',\n    initialState,\n    reducers: {\n        addHabit: (state, action) => {state.habits?.push(action.payload)},\n        updateDatesHabit: (state, action) => {state.habits?.map(habit => habit.id === action.payload.id ? action.payload : habit)}\n    },\n    extraReducers: (builder) => {\n        builder \n            .addCase(fetchHabits.pending, state => {state.habitsLoadingStatus =  'pending'})\n            .addCase(fetchHabits.fulfilled, (state, action) => {\n                state.habits =  action.payload;\n                state.habitsLoadingStatus = 'idle';     \n            })\n            .addCase(fetchHabits.rejected, state => {state.habitsLoadingStatus = 'failed'})\n\n            .addDefaultCase(() => {})\n    }\n});\n\n\nconst {actions, reducer} = habitsSlice;\n\nexport const { addHabit } = actions;\n\nexport default reducer;\n"],"mappings":"AAAA,SAASA,WAAW,EAAEC,gBAAgB,QAAQ,kBAAkB;AAEhE,SAASC,SAAS,QAAQ,+CAA+C;AAOzE,MAAMC,YAAY,GAAG;EACjBC,MAAM,EAAE,EAAE;EACVC,mBAAmB,EAAE;AACzB,CAAY;AAEZ,OAAO,MAAMC,WAAW,GAAGL,gBAAgB,CACvC,mBAAmB,EACnB,OAAOM,MAAc,WAAwB;EAAA,IAAtB;IAACC;EAAe,CAAC;EACpC,MAAMC,QAAQ,GAAG,MAAMP,SAAS,CAACK,MAAM,CAAC;EACxC,IAAI,OAAOE,QAAQ,KAAK,QAAQ,EAAE;IAChC,OAAOA,QAAQ;EACjB,CAAC,MAAM;IACL,OAAOD,eAAe,CAACC,QAAQ,CAAC;EAClC;AACJ,CAAC,CACJ;AAED,MAAMC,WAAW,GAAGV,WAAW,CAAC;EAC5BW,IAAI,EAAE,QAAQ;EACdR,YAAY;EACZS,QAAQ,EAAE;IACNC,QAAQ,EAAE,CAACC,KAAK,EAAEC,MAAM,KAAK;MAAA;MAAC,iBAAAD,KAAK,CAACV,MAAM,kDAAZ,cAAcY,IAAI,CAACD,MAAM,CAACE,OAAO,CAAC;IAAA,CAAC;IACjEC,gBAAgB,EAAE,CAACJ,KAAK,EAAEC,MAAM,KAAK;MAAA;MAAC,kBAAAD,KAAK,CAACV,MAAM,mDAAZ,eAAce,GAAG,CAACC,KAAK,IAAIA,KAAK,CAACC,EAAE,KAAKN,MAAM,CAACE,OAAO,CAACI,EAAE,GAAGN,MAAM,CAACE,OAAO,GAAGG,KAAK,CAAC;IAAA;EAC7H,CAAC;EACDE,aAAa,EAAGC,OAAO,IAAK;IACxBA,OAAO,CACFC,OAAO,CAAClB,WAAW,CAACmB,OAAO,EAAEX,KAAK,IAAI;MAACA,KAAK,CAACT,mBAAmB,GAAI,SAAS;IAAA,CAAC,CAAC,CAC/EmB,OAAO,CAAClB,WAAW,CAACoB,SAAS,EAAE,CAACZ,KAAK,EAAEC,MAAM,KAAK;MAC/CD,KAAK,CAACV,MAAM,GAAIW,MAAM,CAACE,OAAO;MAC9BH,KAAK,CAACT,mBAAmB,GAAG,MAAM;IACtC,CAAC,CAAC,CACDmB,OAAO,CAAClB,WAAW,CAACqB,QAAQ,EAAEb,KAAK,IAAI;MAACA,KAAK,CAACT,mBAAmB,GAAG,QAAQ;IAAA,CAAC,CAAC,CAE9EuB,cAAc,CAAC,MAAM,CAAC,CAAC,CAAC;EACjC;AACJ,CAAC,CAAC;AAGF,MAAM;EAACC,OAAO;EAAEC;AAAO,CAAC,GAAGpB,WAAW;AAEtC,OAAO,MAAM;EAAEG;AAAS,CAAC,GAAGgB,OAAO;AAEnC,eAAeC,OAAO"},"metadata":{},"sourceType":"module","externalDependencies":[]}